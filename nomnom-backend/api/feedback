@app.route('/api/feedback', methods=['POST'])
@jwt_required()
def submit_feedback():
    user_id = get_jwt_identity()
    data = request.get_json()
    restaurant_name = data.get('restaurant_name')
    feedback_type = data.get('feedback_type')
    rating = data.get('rating')
    comment = data.get('comment')

    if not restaurant_name or not feedback_type:
        return jsonify({'message': 'restaurant_name and feedback_type required'}), 400

    feedback = Feedback(
        user_id=user_id,
        restaurant_name=restaurant_name,
        feedback_type=feedback_type,
        rating=rating,
        comment=comment
    )
    db.session.add(feedback)
    db.session.commit()

    return jsonify({'message': 'Feedback saved successfully'}), 201
